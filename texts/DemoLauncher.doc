Description of the Demo Launcher Beta Version 1.0

The main idea is to charge demos like dias in a diaprojector and execute
them one after the other in a sequence.

The Demo Launcher consists of two executable CLI/Shell files:

1) DemoSelector
2) RunDemo

It is divided into two parts to make it possible that both parts can be
executed independent from each other.

Both files can be executed from a HD or from a floppy disc.

I've created a bootdisk which executes via the startup-sequence the
SetPach command and then RunDemo file. If there were no demos specified
by the DemoSelector before, the RunDemo will return with an error message
and the next programm DemoSelector will be executed to specify the demos
to be loaded and executed. This also happens if any other error of the
RunDemo occurs, like the demo file could not be opened.

For speed reasons, RunDemo and DemoSelector could be started with a
loacation on a HD but still out of the floppydisc startup-sequence.
For this case just change "SYS:DemoSelector" and "SYS:RunDemo" to
"DHx:path/DemoSelector" and "DHx:path/RunDemo".


How to use the DemoSelector

You can start it directly from the WB by the menu "Execute command" or
from the Shell. A WB start via an icon is not yet supported.

After the program is started, a file requester is opened. The requester
title bar tells you how many demos you can select to be loaded. For testing
purposes I've limited the number of files to the maximum of 5. I plan to
support up to 30 or 40 files. This maximum value is a fix value and can't
be changed.

At any time you can exit the file requester with the "Quit" gadget.

The content of the current directory where the DemoSelector has its "home"
is displayed. Now you have the chance to change the current directory via
the "Drive" or the "Parent" gadgets.

You can use a pattern filter to display only files with a certain extension
like "#?.exe" for example. The standard pattern is to exclude all ".info"
files with ~.

You have the possibility to type in the filename directly or select it by
the mouse. A multiselection by the mouse or the Shift/Ctrl keys is also
supported.

After you have selected a file or several files you click the gadget "Use".
A new requester opens and gives you the chance to decide whether the demo
or the multiselected demos should be executed in OCS or AGA mode. More of
these modes later.

After you made your choice, the file requester opens again, if not already
5 files were selected to use. The title bar of the file requester tells you
how many files are left to be selected.

If you have selected one file as a minimum and click the "Quit" gadget or
you already have selected 5 files, a new requester opens to give you the
choice making a manual reset via the CRTL+left-Amiga+right-Amiga keys or
automatically by the program.

A resident CoolCapture routine is now installed and nested in the upper
space of the 2 MB CHIP memory. OCS demos don't suppose more than 1 MB CHIP
memory. So the routine is save and executed after the reset. It saves the
pointer to the current filename out of the list of preselected files.


How to use RunDemo

RunDemo needs DemoSelector executed before to get a filename out of a
preselected list. If there is no DemoLauncher-CoolCapture-routine installed
in memory, it will return with an error message which tells you to execute
the DemoSelector first.

RunDemo automatically loads the first demo of the preselected files list,
eventually disables FAST memory, resets the display hardware to OCS
compatible values if needed, eventually turns off the caches and then runs
the demo.

If the demo can be quit, the reset routine is automatically called and the
bootable disc is booted again and RunDemo is executed to load and execute
the second demo out of the list. Alternatively you can call RunDemo from
your WB but the chance of getting nasty OCS demos to be excuted is much
better booting from the floppydisc. Check it for yourself.


About the Start-Modes

The OCS mode does the following with your machine:

-Allocate all FAST memory if available so that the demo is really loaded
 into CHIP memory. Some old OCS demos don't suppose that there could be
 FAST memory and all data for the CUSTOM chips will be there, unreachable
 for them. As a result you won't hear any music and get a blanked display.

-A PAL screen is opened to put the 15kHz screen in front of a potential
 graphic-card screen and all ECS/AGA registers are reset down to OCS
 compatible values. Additionally the sprite pointer is blanked to avoid
 the vertical bar effect if a demo is executed which doesnt turn off
 sprite DMA correctly.

-These specific functions are disabled:
 68020 Instruction cache
 68030 Instruction and Data cache (MMU planned)
 68040 Instruction and Data cache + MMU
 68060 Instruction, Data and Branch cache + MMU + parallel execution

The AGA mode does the following:

-A PAL screen is opened to put the 15kHz screen in front of a potential
 graphic-card screen and all ECS/AGA registers are reset to standard
 values. Additionally the sprite pointer is blanked to avoid the vertical
 bar effect if a demo is executed which doesnt turn off sprite DMA
 correctly.


Known bugs

-On my WinUAE 68060-config the system function to do a reset doesn't work
 if the FPU is enabled. It remains in an endless reset-loop. I have to use
 a 68060 without FPU. On my real A1200/060 with a FPU everything works fine.


Indirect bugs

Not directly by the DemoLauncher, but some intros/demos might have still
display bugs in OCS mode due to the fact of very badly written code:
-One of the most common reasons is that some productions don't wait for
 the blitter to be finished and though parts of the scrolltext or sometimes
 the whole scrolltext isn't displayed. Very obvious, if it happens in
 conjunction with sine-scrolltexts (missing columns) or vector-gfx (cleared
 screen-parts
-Or the intro/demo writes random values to ECS/AGA registers which don't
 exist on OCS
-Or the intro/demo changes the CoolCapture vector to its own routine and
 kicks my routine out though the file RunDemo won't work any more


What is planned

-A WB start from an icon for both programs.

-Supporting the Level-7-interrupt so that a wired external button can reset
 demos which have no exit and stay in an infinite loop. With this method
 there could be also nasty CoolCapture routines kicked out which were
 installed by the intro/demo.

-As I saw while I tested some old AGA demos like "Nexus" of Andromeda which
 remained in a infinite loop on the 68060 it might be useful to support an
 additional "AGA 020" mode. That would mean disabling FAST memory if
 available and turning off the data chache + MMU + parallel execution.
 This would mean the choice between three modes: "OCS" / "AGA 020" / "AGA"

-Join the two files SelectDemo and RunDemo to one file called DemoLauncher
 if wanted.

-I want to add a Resistance-intro, a boobtblock-intro loaded by a track
 loader from the bootdisk, or a an exe-file which only runs once if there
 were no demos chosen right at the beginning. This intro will check if
 there is already a preset filelist of demos in memory.

-RunDemo option [AUTORESET] [NOAUTORESET]
 That means that you can decide if there's an automatic reset after the
 demo is quit or not.


Demo Launcher Beta Version 1.1

-Now the level-7-interrupt triggered by an external interrupt source like
 a wired button is supported. To avoid a reset by mistake, this routine
 normally only clears the Cold/WarmCapture vectors and  restores the
 CoolCapture vector so that our nested reset routine still runs.
 After a new file is loaded by RunDemo, the level-7-interrupt routine is
 changed and clears the Cold/WarmCapture vectors, restores the CoolCapture
 vector and also does a reset after that.
 So intros/demos with no exit can be quit and if the intro/demo has changed
 the Cold/Cool/Warm-Capture vectors for own routines this is the way to
 cancel such actions. Tested only successfully with WinUAE because of a
 lack of a wired button connected to the CPU.

Demo Launcher Beta Version 1.2

-Removed a bug in the OCS/AGA-start: Now PROGDIR: and current directory are
 set to the demo-directory. So there will be no more demos which can't find
 their reloaded extra-files
-Random memory error in the OCS/AGA-start removed
